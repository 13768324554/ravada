<!DOCTYPE html>
<html ng-app="ravada.app">
%= include 'bootstrap/header'
<meta http-equiv="refresh" content="20">
<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top" role="document">
    <div id="wrapper">
    %= include 'bootstrap/navigation'
    <div id="page-wrapper">

        <!--BASES AND DOMAINS LIST-->
        <div ng-controller="machines">
            <div class="page-header">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h2>Machines List 
                        <button id="newMButton" style="float: right; margin: 0 0 0 15px;" class="btn btn-success">New Machine</button>
                        
                        <button id="newMButton" style="float: right; margin: 0 10px;" class="btn btn-info" onclick="location.reload('forceGet')"><i class="fa fa-refresh" aria-hidden="true"></i></button>

                        <div style="float: right;" class="btn-group" data-toggle="buttons">
                        <label  class="btn btn-warning disabled">
                            <input type="checkbox" checked onclick="toggleAutoRefresh(this);" id="reloadCB"> AutoRefresh
                        </label>
                        </div>

                        </h2>
                    </div>
                    
                    <sol-show-listmachines></sol-show-listmachines>
                </div>
            </div>
            <div class="page-header">
            
                <sol-show-machines-notifications></sol-show-machines-notifications>            
            
            </div>
        </div>

        <div ng-controller="new_machine">
            <div id="myModal" class="modal">
            <span class="close" onclick="document.getElementById('myModal').style.display='none'">&times;</span>
            <div class="modal-content" id="NMform">
                <sol-show-newmachine></sol-show-newmachine>
            </div>
            </div>
        </div>

    </div>
    </div>
    %= include 'bootstrap/scripts'
    <script type="text/javascript">
        var reloading;

        function checkReloading() {
            if (window.location.hash=="#autoreload") {
//               reloading=setTimeout("window.location.reload();", 600000);
//                document.getElementById("reloadCB").checked=true;
            }
        }

        function toggleAutoRefresh(cb) {
            if (cb.checked) {
                window.location.replace("#autoreload");
//                reloading=setTimeout("window.location.reload();", 60000);
            } else {
                window.location.replace("#");
                clearTimeout(reloading);
            }
        }

        window.onload=checkReloading;

    </script>
</body>
</html>

