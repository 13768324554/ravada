<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Ravada Installation">
  <meta name="author" content="RaVaDa Team">

  <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
  <link rel="canonical" href="index.html">

  
   <title>new iso image</title>
  
  <!-- Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/startbootstrap-freelancer/3.3.7/css/freelancer.min.css" rel="stylesheet">
  <link href="../../css/rvd.css" rel="stylesheet">

  <!-- Custom Fonts -->
  <link href="../../vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

 </head>
 <body id="page-top" class="index" cz-shortcut-listen="true">
   <!-- Navigation -->
 <nav id="mainNav" class="navbar navbar-default navbar-fixed-top navbar-custom">
 <div class="container">
   <!-- Brand and toggle get grouped for better mobile display -->
   <div class="navbar-header page-scroll">
       <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
           <span class="sr-only">Toggle navigation</span>
           <span class="icon-bar"></span>
           <span class="icon-bar"></span>
           <span class="icon-bar"></span>
       </button>
       <a class="navbar-brand" href="../../index.html"> <i class="fa fa-play-circle"></i>  <span class="light">Ravada</span> VDI</a>
   </div>

   <!-- Collect the nav links, forms, and other content for toggling -->
   <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
       <ul class="nav navbar-nav navbar-right">
           <li class="hidden active">
               <a href="#page-top"></a>
           </li>
           <li class="page-scroll">
               <a href="../../index.html#about">About</a>
           </li>
           <li class="page-scroll">
               <a href="../../index.html#portfolio">Features</a>
           </li>
           <li class="page-scroll">
               <a href="../../index.html#get-started">Get Started</a>
           </li>
           <li class="page-scroll">
               <a href="../../index.html#devel-features">Developers</a>
           </li>
           <li class="page-scroll">
               <a href="../../index.html#help">Help</a>
           </li>
           <li>
               <a href="https://twitter.com/ravada_vdi"><i class="fa fa-twitter"></i></a>
           </li>
       </ul>
   </div>
   <!-- /.navbar-collapse -->
 </div>
 <!-- /.container-fluid -->
 </nav>

   <header class="breadcrumb-header">
     <div class="container">
       <ol class="breadcrumb">
         <li><a href="../../index.html">Home</a></li>
         <li><a href="../../index.html#get-started">Getting Started</a></li>
         <li class="active">new iso image</li>
       </ol>
        <div class="col-lg-12 text-center">
           <h1>new iso image</h1>
           <hr class="star-primary">
        </div>
    </div>
  </header>

<section class="content-page">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <p><h1>How to add a new ISO image</h1>

<p>ISO images are required to create KVM virtual machines. They can be placed or downloaded at run time.</p>

<h2>Placing your own ISO image</h2>

<p>Copy the .iso file to the KVM storage, it is /var/lib/libvirt/images by default. Make sure everybody can read it</p>

<pre><code># chown 0755 file.iso
</code></pre>

<p>Get the md5 for the ISO file, you will need it for the next step:</p>

<pre><code># md5sum file.iso
</code></pre>

<p>Add an entry to the SQL table:</p>

<pre><code>$ mysql -u rvd_user -p ravada
mysql&gt; INSERT INTO iso_images (name, description, arch, xml, xml_volume, md5, device)
        VALUES ('name','the description', 'i386', 'name.xml' ,'name-vol.xml','bbblamd5sumjustgenerated','/var/lib/libvirt/images/file.iso');
</code></pre>

<h2>XML file</h2>

<p>A XML template file is required if you want to create machines from this ISO. In the directory /var/lib/ravada/xml there are examples. You can make new ones creating a new machine from another tool like virt-manager. Once it is down dump the xml with</p>

<pre><code># virsh dumpxml machine &gt; name.xml
</code></pre>

<h2>XML Volume file</h2>

<p>Create a new xml volume file based in another one from /var/lib/ravada/xml.</p>

<h2>Windows specifics</h2>

<p>For Windows you will need the virtio ISO that can be downloaded from https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/stable-virtio/virtio-win.iso</p>

<p>Save it to /var/lib/libvirt/images and change the owner as you did for the Windows ISO.</p>

<pre><code># chown 0750 /var/lib/libvirt/images/virtio-win-0.1.126.iso
</code></pre>

<p>Then edit your Windows xml file and point the second CD drive to that ISO. For the current stable virtio version, it looks like this:</p>

<pre><code>&lt;disk type='file' device='cdrom'&gt;
    &lt;driver name='qemu' type='raw'/&gt;
    &lt;source file='/var/lib/libvirt/images/virtio-win-0.1.126.iso'/&gt;
    &lt;target dev='hdc' bus='ide'/&gt;
    &lt;readonly/&gt;
    &lt;address type='drive' controller='0' bus='1' target='0' unit='0'/&gt;
&lt;/disk&gt;
</code></pre>

<p>You should also ensure that the system disk cache is set to 'directsync':</p>

<pre><code>&lt;driver name='qemu' type='qcow2' cache='directsync' io='native' /&gt;
</code></pre>

<p>If you're using the NEC xhci USB controller (the default one in our environment), you'll need to obtain a suitable driver for the ÂµPD720200 chipset. Plugable.com has it here http://plugable.com/drivers/renesas (2nd entry).</p>
</p>
                <br>
            </div>
        </div>
    </div>
</section>
    <!-- Footer -->
    <footer class="text-center">
        <div class="footer-above">
            <div class="container">
            <div class="row">
                <div class="footer-col col-md-6">
                    <h3>Around the Web</h3>
                    <ul class="list-inline">
                    <li>
                        <a href="https://twitter.com/ravada_vdi" class="btn-social btn-outline"><i class="fa fa-fw fa-twitter"></i></a>
                    </li>
                    <li>
                        <a href="https://github.com/UPC/ravada" class="btn-social btn-outline"><i class="fa fa-fw fa-github"></i></a>
                    </li>
                </ul>
                </div>
                <div class="footer-col col-md-6">
                    <h3>About Ravada</h3>
                    <p>Ravada is a free to use, open source  VDI project.</p>
                    <a href="https://github.com/UPC/ravada/releases"><img src="https://img.shields.io/badge/Version-ravada--0.2.5-green.svg"></a>
                    <a href="https://github.com/UPC/ravada/blob/master/LICENSE"><img src="https://img.shields.io/badge/License-AGPL%20v3-blue.svg"></a>
                    <p><small>Thanks to Bootstrap theme created by <a href="http://startbootstrap.com">Start Bootstrap</a>, Camel in our logo by <a href="https://www.creativetail.com/40-free-flat-animal-icons/">CREATIVE TAIL</a> and Monitor icon by <a href="http://www.graficheria.it/flat-icons-set-free/">Graficheria</a>. Both with <a href="http://creativecommons.org/licenses/by/4.0/"><img src="https://img.shields.io/badge/License-CC%20BY%204.0-lightgrey.svg"></a></small></p>
                </div>
            </div>
        </div>
    </div>
<div class="footer-below">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
           Copyright &copy; RavadaVDI 2017
            </div>
        </div>
    </div>
</div>
</footer>

<!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
<div class="scroll-top page-scroll visible-xs visible-sm">
 <a class="btn btn-primary" href="#page-top">
     <i class="fa fa-chevron-up"></i>
 </a>
</div>

<!-- Placed at the end of the document so the pages load faster -->
<!-- jQuery -->
<script src="../../vendor/jquery/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<!-- Plugin JavaScript -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>

 <!-- Custom Theme JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/startbootstrap-freelancer/3.3.7/js/freelancer.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-98184008-1', 'auto');
  ga('send', 'pageview');

</script>

</body> 
</html>
