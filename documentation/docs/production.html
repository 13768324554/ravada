<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Ravada Installation">
  <meta name="author" content="RaVaDa Team">

  <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
  <link rel="canonical" href="index.html">

  
   <title>production</title>
  
  <!-- Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/startbootstrap-freelancer/3.3.7/css/freelancer.min.css" rel="stylesheet">
  <link href="../../css/rvd.css" rel="stylesheet">

  <!-- Custom Fonts -->
  <link href="../../vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

 </head>
 <body id="page-top" class="index" cz-shortcut-listen="true">
   <!-- Navigation -->
 <nav id="mainNav" class="navbar navbar-default navbar-fixed-top navbar-custom">
 <div class="container">
   <!-- Brand and toggle get grouped for better mobile display -->
   <div class="navbar-header page-scroll">
       <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
           <span class="sr-only">Toggle navigation</span>
           <span class="icon-bar"></span>
           <span class="icon-bar"></span>
           <span class="icon-bar"></span>
       </button>
       <a class="navbar-brand" href="../../index.html"> <i class="fa fa-play-circle"></i>  <span class="light">Ravada</span> VDI</a>
   </div>

   <!-- Collect the nav links, forms, and other content for toggling -->
   <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
       <ul class="nav navbar-nav navbar-right">
           <li class="hidden active">
               <a href="#page-top"></a>
           </li>
           <li class="page-scroll">
               <a href="../../index.html#about">About</a>
           </li>
           <li class="page-scroll">
               <a href="../../index.html#portfolio">Features</a>
           </li>
           <li class="page-scroll">
               <a href="../../index.html#get-started">Get Started</a>
           </li>
           <li>
               <a href="../../documentation/docs/index.html">Documentation</a>
           </li>

           <li class="page-scroll">
               <a href="../../index.html#devel-features">Developers</a>
           </li>
           <li class="page-scroll">
               <a href="../../index.html#help">Help</a>
           </li>
           <li>
               <a href="https://twitter.com/ravada_vdi"><i class="fa fa-twitter"></i></a>
           </li>
       </ul>
   </div>
   <!-- /.navbar-collapse -->
 </div>
 <!-- /.container-fluid -->
 </nav>

   <header class="breadcrumb-header">
     <div class="container">
       <ol class="breadcrumb">
         <li><a href="../../index.html">Home</a></li>
         <li><a href="../../index.html#get-started">Getting Started</a></li>
         <li class="active">production</li>
       </ol>
        <div class="col-lg-12 text-center">
           <h1>production</h1>
           <hr class="star-primary">
        </div>
    </div>
  </header>

<section class="content-page">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <p><h1>Running Ravada in production</h1>

<p>Ravada has two daemons that must run on the production server:</p>

<ul>
<li>rvd_back : must run as root and manages the virtual machines</li>
<li>rvd_front : is the web frontend that sends requests to the backend</li>
</ul>

<h2>Configuration (Optional)</h2>

<p>The frontend has a secret passphrase that should be changed. Cookies
and user session rely on this. You can have many passphrases that
get rotated to improve security even more.</p>

<p>Change the file /etc/rvd_front.conf line <em>secrets</em> like this:</p>

<pre><code>, secrets =&gt; ['my secret 1', 'my secret 2' ]
</code></pre>

<h2>System services</h2>

<h3>Configuration for boot start</h3>

<p>There are two services to start and stop the two ravada daemons:</p>

<p>After install or upgrade you may have to refresh the systemd service units:</p>

<pre><code>$ sudo systemctl daemon-reload
</code></pre>

<p>Check the services are enabled to run at startup</p>

<pre><code>$ sudo systemctl enable rvd_back
$ sudo systemctl enable rvd_front
</code></pre>

<h3>Start</h3>

<pre><code>$ sudo systemctl start rvd_back
$ sudo systemctl start rvd_front
</code></pre>

<h3>Stop</h3>

<pre><code>$ sudo systemctl stop rvd_back
$ sudo systemctl stop rvd_front
</code></pre>

<h2>Apache</h2>

<p>You can reach the Ravada frontend heading to http://your.server.ip:8081/.
It is advised to run an Apache server or similar before the frontend.</p>

<pre><code># apt-get install apache2
</code></pre>

<p>In order to make ravada use apache, you must follow the steps explained on <a href="apache.html">here</a>.</p>

<p>If you face any errors during this procedure, please read the page "Troubleshooting".
If you do not know how to create a virtual machine, please read the page "creating virtual machines".</p>

<h2>Firewall</h2>

<p>Ravada uses <code>iptables</code> to restrict the access to the virtual machines. 
These iptables rules grants acess to the admin workstation to all the domains
and disables the access to everyone else.
When the users access through the web broker they are allowed to the port of
their virtual machines. Ravada uses its own iptables chain called 'ravada' to
do so:</p>

<pre><code>-A INPUT -p tcp -m tcp -s ip.of.admin.workstation --dport 5900:7000 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 5900:7000 -j DROP
</code></pre>
</p>
                <br>
            </div>
        </div>
    </div>
</section>
    <!-- Footer -->
    <footer class="text-center">
        <div class="footer-above">
            <div class="container">
            <div class="row">
                <div class="footer-col col-md-6">
                    <h3>Around the Web</h3>
                    <ul class="list-inline">
                    <li>
                        <a href="https://twitter.com/ravada_vdi" class="btn-social btn-outline"><i class="fa fa-fw fa-twitter"></i></a>
                    </li>
                    <li>
                        <a href="https://github.com/UPC/ravada" class="btn-social btn-outline"><i class="fa fa-fw fa-github"></i></a>
                    </li>
                </ul>
                </div>
                <div class="footer-col col-md-6">
                    <h3>About Ravada</h3>
                    <p>Ravada is a free to use, open source  VDI project.</p>
                    <a href="https://github.com/UPC/ravada/blob/0.2.6/CHANGELOG.md"><img src="https://img.shields.io/badge/Version-ravada--0.2.6-green.svg"></a>
                    <a href="https://github.com/UPC/ravada/blob/master/LICENSE"><img src="https://img.shields.io/badge/License-AGPL%20v3-blue.svg"></a>
                    <p><small>Thanks to Bootstrap theme created by <a href="http://startbootstrap.com">Start Bootstrap</a>, Camel in our logo by <a href="https://www.creativetail.com/40-free-flat-animal-icons/">CREATIVE TAIL</a> and Monitor icon by <a href="http://www.graficheria.it/flat-icons-set-free/">Graficheria</a>. Both with <a href="http://creativecommons.org/licenses/by/4.0/"><img src="https://img.shields.io/badge/License-CC%20BY%204.0-lightgrey.svg"></a></small></p>
                </div>
            </div>
        </div>
    </div>
<div class="footer-below">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
           Copyright &copy; RavadaVDI 2017
            </div>
        </div>
    </div>
</div>
</footer>

<!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
<div class="scroll-top page-scroll visible-xs visible-sm">
 <a class="btn btn-primary" href="#page-top">
     <i class="fa fa-chevron-up"></i>
 </a>
</div>

<!-- Placed at the end of the document so the pages load faster -->
<!-- jQuery -->
<script src="../../vendor/jquery/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<!-- Plugin JavaScript -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>

 <!-- Custom Theme JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/startbootstrap-freelancer/3.3.7/js/freelancer.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-98184008-1', 'auto');
  ga('send', 'pageview');

</script>

</body> 
</html>
